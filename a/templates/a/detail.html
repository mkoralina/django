<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <!--ajax-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">


    {% load staticfiles %}
    <link href="{% static 'bootstrap/css/bootstrap.min.css' %}" rel="stylesheet" media="screen">
    <style type="text/css">
    /*calosc stylow*/

    </style>

     <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    {% load staticfiles %}
    <script src="{% static 'bootstrap/js/bootstrap.min.js' %}"></script>




    <title>{% block title %}Choose your term</title>{% endblock%}

</head>
<body>

<h1>{{ room.name }}</h1>

{% if error_message %}
    <p>{{ error_message }}</p>
{% else %}





    {% if room.terms.all %}


        {% regroup room.terms.all by date as terms_list %}




        {% for date in terms_list %}

        {% with forloop.counter|stringformat:"s" as id %}
        {% with "collapse"|add:id as collapse_id %}
        {% with "#collapse"|add:id as href_collapse %}

        <div class="panel-group" id="accordion{{ forloop.counter }}">
          <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">
                <a data-toggle="collapse" data-parent="#accordion{{ forloop.counter }}" href="#collapse{{ forloop.counter }}" >



                Date: {{ date.grouper }} (
                {% for item in date.list %}
                    {{item.begin_time.hour}} - {{item.end_time.hour}},
                {% endfor %}
                )

                </a>
                </h4>
            </div>
            <div id="collapse{{ forloop.counter }}" class="panel-collapse collapse">
                <div class="panel-body">

                    <!-- GLOWNA CZESC MODALA -->
                <div class="btn-group" data-toggle="buttons">

                available hours: <br><br>
                {% for item in date.list %}


                    {% for hour in item.hours %}

                    <label id="hour{{ hour }}" class="btn btn-primary btn-hour">
                    <input type="checkbox"> {{ hour }} - {{ hour|add:"1" }}
                    </label>


                    {% endfor %}



                {% endfor %}


                <br><br>
                    Lista godzin:
                {% for item in date.list %}
                    <li>{{item.begin_time.hour}} - {{item.end_time.hour}}</li>
                {% endfor %}

                </div>
            </div>
        </div>
        </div>
        {% endwith %}
        {% endwith %}
        {% endwith %}


        {% endfor %}


    {% else %}

    There are no terms available.

    {% endif %}

    <hr>
    {% if user.is_authenticated %}
        <p>You are logged in as: {{ user.username }}<br>
           <a href="{% url 'a:logout' %}">Log out</a></p>
    {% endif %}


{% endif %}

<script>

$(".btn-hour").click(function() {
        $(this).attr('disabled', false)


        });

    </script>




</body>
</html>

